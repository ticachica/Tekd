/*
 * JS for videogrid generated by Exadel Tiggzi
 *
 * Created on: Monday, October 29, 2012, 11:16:15 PM (PDT)
 */
/************************************
 * JS API provided by Exadel Tiggzi  *
 ************************************/
/* Setting project environment indicator */
Tiggr.env = "apk";
Tiggr.getProjectGUID = function() {
    return '875eb6fa-5d87-4bb4-b69d-08d7c2a5a2d7';
}
Tiggr.getTargetPlatform = function() {
    return 'A';
}

function navigateTo(outcome, useAjax) {
    Tiggr.navigateTo(outcome, useAjax);
}

function adjustContentHeight() {
    Tiggr.adjustContentHeight();
}

function adjustContentHeightWithPadding() {
    Tiggr.adjustContentHeightWithPadding();
}

function setDetailContent(pageUrl) {
    Tiggr.setDetailContent(pageUrl);
}
/**********************
 * SECURITY CONTEXTS  *
 **********************/
/*******************************
 *      SERVICE SETTINGS        *
 ********************************/
var Tout_Settings = {
    "suid": "gfln7u",
    "suid1": "97ayb0"
}
/*************************
 *      SERVICES          *
 *************************/
var UG = new Tiggr.RestService({
    'url': 'http://api.usergrid.com/token',
    'dataType': 'json',
    'type': 'get',
});
var GetApigeeResources = new Tiggr.RestService({
    'url': 'https://api.usergrid.com/outdated/tekd/users',
    'dataType': 'json',
    'type': 'get',
});
var Twitter = new Tiggr.RestService({
    'url': 'http://search.twitter.com/search.json',
    'dataType': 'json',
    'type': 'get',
});
var Keen = new Tiggr.RestService({
    'url': 'https://api.keen.io/3.0/projects/508c42a9897a2c14a4000003/events/learningtypeselections',
    'dataType': 'json',
    'type': 'post',
    'contentType': 'application/json',
});
var getApigeeResults = new Tiggr.RestService({
    'url': 'https://api.usergrid.com/outdated/tekd/courses',
    'dataType': 'json',
    'type': 'get',
});
var GetApigeetoken = new Tiggr.RestService({
    'url': 'http://api.usergrid.com/outdated/tekd/token',
    'dataType': 'json',
    'type': 'get',
});
var Tout = new Tiggr.RestService({
    'url': 'https://api.tout.com/api/v1/touts/{uid}',
    'dataType': 'json',
    'type': 'get',
    'serviceSettings': Tout_Settings
});
createSpinner("res/lib/jquerymobile/images/ajax-loader.gif");
Tiggr.AppPages = [{
    "name": "profile_goals",
    "location": "profile_goals.html"
}, {
    "name": "profile_designcomp",
    "location": "profile_designcomp.html"
}, {
    "name": "profile_codecomp",
    "location": "profile_codecomp.html"
}, {
    "name": "profile_ethnicity",
    "location": "profile_ethnicity.html"
}, {
    "name": "videogrid",
    "location": "videogrid.html"
}, {
    "name": "profile_gender",
    "location": "profile_gender.html"
}, {
    "name": "videoscreen",
    "location": "videoscreen.html"
}, {
    "name": "profile_Age",
    "location": "profile_Age.html"
}, {
    "name": "results_page",
    "location": "results_page.html"
}, {
    "name": "startScreen",
    "location": "startScreen.html"
}];
j_53_js = function(runBeforeShow) { /* Object & array with components "name-to-id" mapping */
    var n2id_buf = {
        'mobilelabel22': 'j_57',
        'mobilegrid1': 'j_58',
        'mobilegridcell1': 'j_59',
        'mobileimage1': 'j_60',
        'videoid': 'j_61',
        'mobilegridcell2': 'j_62',
        'mobileimage2': 'j_63',
        'videoid1': 'j_64',
        'mobilegridcell3': 'j_65',
        'mobileimage3': 'j_66',
        'videoid2': 'j_67',
        'mobilegridcell4': 'j_68',
        'mobileimage5': 'j_69',
        'videoid3': 'j_70',
        'mobilegrid2': 'j_71',
        'mobilegridcell5': 'j_72',
        'mobilelabel28': 'j_73',
        'mobilegridcell6': 'j_74',
        'mobilebutton2': 'j_75',
        'mobilegridcell7': 'j_76',
        'mobilebutton4': 'j_77',
        'mobilegridcell8': 'j_78',
        'mobilebutton5': 'j_79',
        'mobilegridcell9': 'j_80',
        'mobilebutton6': 'j_81',
        'status': 'j_82'
    };
    if ("n2id" in window && window.n2id !== undefined) {
        $.extend(n2id, n2id_buf);
    } else {
        window.n2id = n2id_buf;
    }
    Tiggr.CurrentScreen = 'j_53';
    /*************************
     * NONVISUAL COMPONENTS  *
     *************************/
    var datasources = [];
    restservice2 = new Tiggr.DataSource(Twitter, {
        'onComplete': function(jqXHR, textStatus) {
            $t.refreshScreenFormElements("j_53");
        },
        'onSuccess': function(data) {},
        'onError': function(jqXHR, textStatus, errorThrown) {},
        'responseMapping': [],
        'requestMapping': [{
            'PATH': ['q'],
            'ATTR': 'hi'
        }]
    });
    datasources.push(restservice2);
    ToutAPICall = new Tiggr.DataSource(Tout, {
        'onComplete': function(jqXHR, textStatus) {
            $t.refreshScreenFormElements("j_53");
        },
        'onSuccess': function(data) {},
        'onError': function(jqXHR, textStatus, errorThrown) {},
        'responseMapping': [{
            'PATH': ['tout', 'video', 'mp4', 'http_url'],
            'ID': 'videoid',
            'ATTR': '@'
        }, {
            'PATH': ['tout', 'image', 'thumbnail', 'http_url'],
            'ID': 'mobileimage1',
            'ATTR': 'src'
        }],
        'requestMapping': [{
            'PATH': ['access_token'],
            'ATTR': '8e91470735d1e892959ae148ecfd5f71eaae10ebc08165dc8a2afc0408f62b6b'
        }, {
            'PATH': ['uid'],
            'ATTR': 'grvu2w'
        }]
    });
    datasources.push(ToutAPICall);
    ToutAPICall3 = new Tiggr.DataSource(Tout, {
        'onComplete': function(jqXHR, textStatus) {
            $t.refreshScreenFormElements("j_53");
        },
        'onSuccess': function(data) {},
        'onError': function(jqXHR, textStatus, errorThrown) {},
        'responseMapping': [{
            'PATH': ['tout', 'video', 'mp4', 'http_url'],
            'ID': 'videoid3',
            'ATTR': '@'
        }, {
            'PATH': ['tout', 'image', 'thumbnail', 'http_url'],
            'ID': 'mobileimage5',
            'ATTR': 'src'
        }],
        'requestMapping': [{
            'PATH': ['access_token'],
            'ATTR': '8e91470735d1e892959ae148ecfd5f71eaae10ebc08165dc8a2afc0408f62b6b'
        }, {
            'PATH': ['uid'],
            'ATTR': 'jpd303'
        }]
    });
    datasources.push(ToutAPICall3);
    ToutAPICall2 = new Tiggr.DataSource(Tout, {
        'onComplete': function(jqXHR, textStatus) {
            $t.refreshScreenFormElements("j_53");
        },
        'onSuccess': function(data) {},
        'onError': function(jqXHR, textStatus, errorThrown) {},
        'responseMapping': [{
            'PATH': ['tout', 'video', 'mp4', 'http_url'],
            'ID': 'videoid2',
            'ATTR': '@'
        }, {
            'PATH': ['tout', 'image', 'thumbnail', 'http_url'],
            'ID': 'mobileimage3',
            'ATTR': 'src'
        }],
        'requestMapping': [{
            'PATH': ['access_token'],
            'ATTR': '8e91470735d1e892959ae148ecfd5f71eaae10ebc08165dc8a2afc0408f62b6b'
        }, {
            'PATH': ['uid'],
            'ATTR': '97ayb0'
        }]
    });
    datasources.push(ToutAPICall2);
    ToutAPICall1 = new Tiggr.DataSource(Tout, {
        'onComplete': function(jqXHR, textStatus) {
            $t.refreshScreenFormElements("j_53");
        },
        'onSuccess': function(data) {},
        'onError': function(jqXHR, textStatus, errorThrown) {},
        'responseMapping': [{
            'PATH': ['tout', 'video', 'mp4', 'http_url'],
            'ID': 'videoid1',
            'ATTR': '@'
        }, {
            'PATH': ['tout', 'image', 'thumbnail', 'http_url'],
            'ID': 'mobileimage2',
            'ATTR': 'src'
        }],
        'requestMapping': [{
            'PATH': ['access_token'],
            'ATTR': '8e91470735d1e892959ae148ecfd5f71eaae10ebc08165dc8a2afc0408f62b6b'
        }, {
            'PATH': ['uid'],
            'ATTR': 'rtdp3b'
        }]
    });
    datasources.push(ToutAPICall1);
    LogKeenEvent = new Tiggr.DataSource(Keen, {
        'onComplete': function(jqXHR, textStatus) {
            $t.refreshScreenFormElements("j_53");
        },
        'onSuccess': function(data) {},
        'onError': function(jqXHR, textStatus, errorThrown) {},
        'responseMapping': [{
            'PATH': ['created'],
            'ID': 'status',
            'ATTR': '@'
        }],
        'requestMapping': [{
            'PATH': ['authorization'],
            'HEADER': true,
            'ATTR': '64cf9e4973a64852980e3e4f05c09c1f'
        }, {
            'PATH': ['name'],
            'ID': '___local_storage___',
            'ATTR': 'username'
        }, {
            'PATH': ['userage'],
            'ID': '___local_storage___',
            'ATTR': 'age'
        }, {
            'PATH': ['selection'],
            'ID': '___local_storage___',
            'ATTR': 'selection'
        }]
    });
    datasources.push(LogKeenEvent);
    /************************
     * EVENTS AND HANDLERS  *
     ************************/
    j_53_beforeshow = function() {
        Tiggr.CurrentScreen = 'j_53';
        for (var idx = 0; idx < datasources.length; idx++) {
            datasources[idx].__setupDisplay();
        }
    }
    // screen onload
    screen_3671_onLoad = j_53_onLoad = function() {
        screen_3671_elementsExtraJS();
        try {
            ToutAPICall.execute({})
        } catch (ex) {
            console.log(ex.name + '  ' + ex.message);
            hideSpinner();
        };
        try {
            ToutAPICall1.execute({})
        } catch (ex) {
            console.log(ex.name + '  ' + ex.message);
            hideSpinner();
        };
        try {
            ToutAPICall2.execute({})
        } catch (ex) {
            console.log(ex.name + '  ' + ex.message);
            hideSpinner();
        };
        try {
            ToutAPICall3.execute({})
        } catch (ex) {
            console.log(ex.name + '  ' + ex.message);
            hideSpinner();
        };
        localStorage['age'] = 27;
        localStorage['username'] = Math.random().toString(36).substring(7);
        j_53_deviceEvents();
        j_53_windowEvents();
        screen_3671_elementsEvents();
    }
    // screen window events
    screen_3671_windowEvents = j_53_windowEvents = function() {
        $('#j_53').bind('pageshow orientationchange', function() {
            adjustContentHeightWithPadding();
        });
    }
    // device events
    j_53_deviceEvents = function() {
        document.addEventListener("deviceready", function() {});
    }
    // screen elements extra js
    screen_3671_elementsExtraJS = j_53_elementsExtraJS = function() {
        // screen (screen-3671) extra code
    }
    // screen elements handler
    screen_3671_elementsEvents = j_53_elementsEvents = function() {
        $("a :input,a a,a fieldset label").live({
            click: function(event) {
                event.stopPropagation();
            }
        });
        $('#j_56 [name="mobilegridcell1"]').die().live({
            click: function() {
                if (!$(this).attr('disabled')) {
                    var url = Tiggzi('videoid').text();
                    localStorage['video_src'] = url;
                    Tiggr.navigateTo('videoscreen', {
                        reverse: false
                    });
                }
            },
        });
        $('#j_56 [name="mobilegridcell2"]').die().live({
            click: function() {
                if (!$(this).attr('disabled')) {
                    var url = Tiggzi('videoid1').text();
                    localStorage['video_src'] = url;
                    Tiggr.navigateTo('videoscreen', {
                        reverse: false
                    });
                }
            },
            click: function() {
                if (!$(this).attr('disabled')) {
                    var url = Tiggzi('videoid1').text();
                    localStorage['video_src'] = url;
                    Tiggr.navigateTo('videoscreen', {
                        reverse: false
                    });
                }
            },
        });
        $('#j_56 [name="mobilegridcell3"]').die().live({
            click: function() {
                if (!$(this).attr('disabled')) {
                    var url = Tiggzi('videoid').text();
                    localStorage['video_src'] = url;
                    Tiggr.navigateTo('videoscreen', {
                        reverse: false
                    });
                }
            },
        });
        $('#j_56 [name="mobilegridcell4"]').die().live({
            click: function() {
                if (!$(this).attr('disabled')) {
                    var url = Tiggzi('videoid').text();
                    localStorage['video_src'] = url;
                    Tiggr.navigateTo('videoscreen', {
                        reverse: false
                    });
                }
            },
        });
        $('#j_56 [name="mobilebutton2"]').die().live({
            click: function() {
                if (!$(this).attr('disabled')) {
                    try {
                        LogKeenEvent.execute({})
                    } catch (ex) {
                        console.log(ex.name + '  ' + ex.message);
                        hideSpinner();
                    };
                    localStorage['selection'] = 'physical_group';
                    Tiggr.navigateTo('results_page', {
                        reverse: false
                    });
                }
            },
        });
        $('#j_56 [name="mobilebutton4"]').die().live({
            click: function() {
                if (!$(this).attr('disabled')) {
                    localStorage['selection'] = 'physical_individual';
                    try {
                        LogKeenEvent.execute({})
                    } catch (ex) {
                        console.log(ex.name + '  ' + ex.message);
                        hideSpinner();
                    };
                    Tiggr.navigateTo('results_page', {
                        reverse: false
                    });
                }
            },
        });
        $('#j_56 [name="mobilebutton5"]').die().live({
            click: function() {
                if (!$(this).attr('disabled')) {
                    localStorage['selection'] = 'virtual_group';
                    try {
                        LogKeenEvent.execute({})
                    } catch (ex) {
                        console.log(ex.name + '  ' + ex.message);
                        hideSpinner();
                    };
                    Tiggr.navigateTo('results_page', {
                        reverse: false
                    });
                }
            },
        });
        $('#j_56 [name="mobilebutton6"]').die().live({
            click: function() {
                if (!$(this).attr('disabled')) {
                    localStorage['selection'] = 'virtual_individual';
                    try {
                        LogKeenEvent.execute({})
                    } catch (ex) {
                        console.log(ex.name + '  ' + ex.message);
                        hideSpinner();
                    };
                    Tiggr.navigateTo('results_page', {
                        reverse: false
                    });
                }
            },
        });
    }
    $("#j_53").die("pagebeforeshow").live("pagebeforeshow", function(event, ui) {
        j_53_beforeshow();
    });
    if (runBeforeShow) {
        j_53_beforeshow();
    } else {
        j_53_onLoad();
    }
}
$("#j_53").die("pageinit").live("pageinit", function(event, ui) {
    j_53_js();
});